/*=============================================================================
 Copyright (c) 2011 Broadcom Europe Limited.
 All rights reserved.

 Module   :  Hardware video decoder

 $Id: $

 FILE DESCRIPTION
 H.264 constant data
===============================================================================*/

#include "h264_consts.h"

/***************************************************************************//**
Default scaling matrices.

The default values here are given in tables 7-3 and 7-4 (section 7.4.2.1.1).

*******************************************************************************/
const uint8_t h264_default_4x4_intra[16] = {
   20, 13, 13,  6, 28, 28, 20, 20,
   32, 32, 28, 28, 42, 37, 37, 32
};

const uint8_t h264_default_4x4_inter[16] = {
   20, 14, 14, 10, 24, 24, 20, 20,
   27, 27, 24, 24, 34, 30, 30, 27
};

const uint8_t h264_default_8x8_intra[64] = {
   13, 10, 10,  6, 16, 16, 13, 11,
   18, 18, 16, 16, 23, 18, 18, 18,
   23, 23, 23, 23, 25, 25, 25, 23,
   25, 25, 25, 25, 27, 27, 27, 27,
   27, 27, 27, 27, 29, 29, 29, 29,
   31, 29, 29, 29, 31, 31, 31, 31,
   33, 33, 33, 31, 36, 36, 33, 33,
   38, 38, 36, 36, 42, 40, 40, 38
};

const uint8_t h264_default_8x8_inter[64] = {
   15, 13, 13,  9, 17, 17, 15, 13,
   19, 19, 17, 17, 21, 19, 19, 19,
   21, 21, 21, 21, 22, 22, 22, 21,
   22, 22, 22, 22, 24, 24, 24, 24,
   24, 24, 24, 24, 25, 25, 25, 25,
   27, 25, 25, 25, 27, 27, 27, 27,
   28, 28, 28, 27, 30, 30, 28, 28,
   32, 32, 30, 30, 35, 33, 33, 32
};


/* Scaling factor table used for weighted prediction (Equation 8-199 in the standard.) */
const uint16_t h264_dist_tx[128] = {
   16384,   8192,   5461,   4096,   3277,   2731,   2341,   2048,   1820,   1638,
   1489,   1365,   1260,   1170,   1092,   1024,    964,    910,    862,    819,
   780,    745,    712,    683,    655,    630,    607,    585,    565,    546,
   529,    512,    496,    482,    468,    455,    443,    431,    420,    410,
   400,    390,    381,    372,    364,    356,    349,    341,    334,    328,
   321,    315,    309,    303,    298,    293,    287,    282,    278,    273,
   269,    264,    260,    256,    252,    248,    245,    241,    237,    234,
   231,    228,    224,    221,    218,    216,    213,    210,    207,    205,
   202,    200,    197,    195,    193,    191,    188,    186,    184,    182,
   180,    178,    176,    174,    172,    171,    169,    167,    165,    164,
   162,    161,    159,    158,    156,    155,    153,    152,    150,    149,
   148,    146,    145,    144,    142,    141,    140,    139,    138,    137,
   135,    134,    133,    132,    131,    130,    129,    128
};

/* Scaling table above, munged into a form such that it can be memcpied directly into the hardware registers */
/* Method of munging:
   for (i = 0; i < 127; i+=2) {
      if (i == 0){
         upper = h264_dist_tx[127];
         lower = h264_dist_tx[0];
      }
      else {
         upper = h264_dist_tx[i-1];
         lower = h264_dist_tx[i];
      }

      dist_tx_hw[i/2] = (upper << 16) | lower;
   }
*/
const uint32_t h264_dist_tx_hw[64] = {
   (  128<<16)|16384, ( 8192<<16)| 5461, ( 4096<<16)| 3277, ( 2731<<16)| 2341, ( 2048<<16)| 1820,
   ( 1638<<16)| 1489, ( 1365<<16)| 1260, ( 1170<<16)| 1092, ( 1024<<16)|  964, (  910<<16)|  862,
   (  819<<16)|  780, (  745<<16)|  712, (  683<<16)|  655, (  630<<16)|  607, (  585<<16)|  565,
   (  546<<16)|  529, (  512<<16)|  496, (  482<<16)|  468, (  455<<16)|  443, (  431<<16)|  420,
   (  410<<16)|  400, (  390<<16)|  381, (  372<<16)|  364, (  356<<16)|  349, (  341<<16)|  334,
   (  328<<16)|  321, (  315<<16)|  309, (  303<<16)|  298, (  293<<16)|  287, (  282<<16)|  278,
   (  273<<16)|  269, (  264<<16)|  260, (  256<<16)|  252, (  248<<16)|  245, (  241<<16)|  237,
   (  234<<16)|  231, (  228<<16)|  224, (  221<<16)|  218, (  216<<16)|  213, (  210<<16)|  207,
   (  205<<16)|  202, (  200<<16)|  197, (  195<<16)|  193, (  191<<16)|  188, (  186<<16)|  184,
   (  182<<16)|  180, (  178<<16)|  176, (  174<<16)|  172, (  171<<16)|  169, (  167<<16)|  165,
   (  164<<16)|  162, (  161<<16)|  159, (  158<<16)|  156, (  155<<16)|  153, (  152<<16)|  150,
   (  149<<16)|  148, (  146<<16)|  145, (  144<<16)|  142, (  141<<16)|  140, (  139<<16)|  138,
   (  137<<16)|  135, (  134<<16)|  133, (  132<<16)|  131, (  130<<16)|  129
};



